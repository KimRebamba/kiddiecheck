users
id            BIGINT PRIMARY KEY
name          VARCHAR(255) NOT NULL
email         VARCHAR(255) UNIQUE NOT NULL
password      VARCHAR(255) NOT NULL
role          ENUM('family', 'teacher', 'admin') NOT NULL
status        ENUM('active', 'inactive') DEFAULT 'active'
created_at    TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at    TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP

family
id           BIGINT PRIMARY KEY
user_id      BIGINT UNIQUE NOT NULL REFERENCES users(id) -- Strictly 1 account per family
name         VARCHAR(255) NOT NULL       -- Family last name or chosen display name
home_address VARCHAR(255) NOT NULL
created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP


student
id                BIGINT PRIMARY KEY
family_id         BIGINT NOT NULL REFERENCES family(id)
name              VARCHAR(255) NOT NULL
dob               DATE NOT NULL
emergency_contact VARCHAR(50)       -- phone number
gender            ENUM('male', 'female', 'other') NOT NULL
enrollment_date   DATE NOT NULL
status            ENUM('active', 'transferred', 'graduated') DEFAULT 'active'
section_id 	  BITGINT NOT NULL REFERENCES section(id)
notes             TEXT
created_at        TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at        TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP

sections
id          BIGINT PRIMARY KEY
name        VARCHAR(255) NOT NULL           -- e.g., "Nursery 1"
description TEXT
created_at  TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at  TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP


student_tags
student_id  BIGINT NOT NULL REFERENCES child(id)
tag_type  ENUM('allergy', 'medical', 'learning_needs', 'others') NOT NULL
notes     TEXT
UNIQUE(child_id, tag_type)

teacher
id         BIGINT PRIMARY KEY REFERENCES users(id)
hire_date  DATE
status     ENUM('active', 'inactive') DEFAULT 'active'

teacher_child
teacher_id BIGINT NOT NULL REFERENCES teacher(id)
child_id   BIGINT NOT NULL REFERENCES child(id)
role       ENUM('homeroom','specialist','others') 
assigned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
status     ENUM('active', 'inactive') DEFAULT 'active'


domains
id          BIGINT PRIMARY KEY
name        VARCHAR(255) NOT NULL
description TEXT

questions
id            BIGINT PRIMARY KEY
domain_id     BIGINT NOT NULL REFERENCES domains(id)
question_text TEXT NOT NULL
type          ENUM('static', 'interactive') NOT NULL
instructions  TEXT                 -- optional
created_at    TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at    TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP

tests
id            BIGINT PRIMARY KEY
child_id      BIGINT NOT NULL REFERENCES child(id)
observer_id   BIGINT NULL REFERENCES users(id)
test_date     DATE NOT NULL                        -- Format: 'YYYY-MM-01'
status        ENUM('pending', 'in_progress', 'completed','cancelled','terminated') DEFAULT 'pending'
started_at    TIMESTAMP NULL
submitted_by  VARCHAR(255) NULL
submitted_at  TIMESTAMP NULL

UNIQUE(child_id, test_date, observer_role)         

test_responses
test_id     BIGINT NOT NULL REFERENCES tests(id)
question_id BIGINT NOT NULL REFERENCES questions(id)
score       DECIMAL(5,2)         
comment     TEXT
updated_at  TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP

domain_scores
test_id            BIGINT NOT NULL REFERENCES tests(id)
domain_id          BIGINT NOT NULL REFERENCES domains(id)
raw_score          DECIMAL(5,2)
scaled_score       DECIMAL(5,2)
scaled_score_based DECIMAL(5,2)
created_at         TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at         TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP