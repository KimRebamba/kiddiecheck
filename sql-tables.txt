computations so far:

-> each domain raw score, add to scaled score 

-> Step 1:

Each question has a score field:
0 = fail
1 = pass
NULL = not applicable (N/A)

Stored in test_responses.

Example (Cognitive domain, 5 questions):

Question	Score
Q1	1
Q2	0
Q3	1
Q4	NULL
Q5	1

Ignore NULL for calculations

Raw domain score = sum of applicable scores = 1 + 0 + 1 + 1 = 3

Max possible for domain = number of applicable questions = 4 (for fairness)

-> Step 2: Domain raw score → Scaled score

Store in domain_scores.scaled_score

-> Step 3: Sum scaled scores → total child score

Add all scaled scores from each domain to get sum of scaled scores:

Sum of scaled scores = 3 + 4 + 3 + 4 = 14

Store in test_summary.sum_scaled_scores

-> Step 4: Interpret using ECCD percentile/scale

???


users
id           BIGINT PRIMARY KEY
name         VARCHAR(255) NOT NULL
email        VARCHAR(255) UNIQUE NOT NULL
password     VARCHAR(255) NOT NULL
role         ENUM('parent', 'teacher', 'admin') NOT NULL
status       ENUM('active', 'inactive') DEFAULT 'active'
created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP

family
id          BIGINT PRIMARY KEY
name        VARCHAR(255) NOT NULL       -- Family last name or chosen display name
home_address VARCHAR(255) NOT NULL
created_at  TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at  TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP

child
id                BIGINT PRIMARY KEY
family_id         BIGINT NOT NULL REFERENCES family(id)
name              VARCHAR(255) NOT NULL
dob               DATE NOT NULL
emergency_contact VARCHAR(50)       -- phone number
gender            ENUM('male', 'female', 'other') NOT NULL
enrollment_date   DATE NOT NULL
status            ENUM('active', 'transferred', 'graduated') DEFAULT 'active'
tag_type 	  ENUM('allergy', 'medical', 'learning_needs', 'others')
notes 		  TEXT
created_at        TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at        TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP

teacher
id         BIGINT PRIMARY KEY REFERENCES users(id)
hire_date  DATE
status     ENUM('active', 'inactive') DEFAULT 'active'

teacher_child
id         BIGINT PRIMARY KEY
teacher_id BIGINT NOT NULL REFERENCES teacher(id)
child_id   BIGINT NOT NULL REFERENCES child(id)
role ENUM('homeroom','specialist','others') 
assigned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
status     ENUM('active', 'inactive') DEFAULT 'active'

domains
id          BIGINT PRIMARY KEY
name        VARCHAR(255) NOT NULL
description TEXT

questions
id           BIGINT PRIMARY KEY
domain_id    BIGINT NOT NULL REFERENCES domains(id)
question_text TEXT NOT NULL
type         ENUM('static', 'interactive') NOT NULL
instructions TEXT                -- optional
created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP

tests
id           BIGINT PRIMARY KEY
child_id     BIGINT NOT NULL REFERENCES child(id)
observer_id  BIGINT NOT NULL REFERENCES users(id)  -- parent/family or teacher
test_date    DATE NOT NULL  -- format: 'YYYY-MM'
status       ENUM('in_progress', 'completed','cancelled','terminated') DEFAULT 'in_progress'
started_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP
submitted_by VARCHAR(255) NOT NULL
submitted_at TIMESTAMP

test_responses
id          BIGINT PRIMARY KEY
test_id     BIGINT NOT NULL REFERENCES tests(id)
question_id BIGINT NOT NULL REFERENCES questions(id)
score       DECIMAL(5,2)        -- nullable if non-applicable
comment     TEXT
updated_at  TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP

domain_scores
id           BIGINT PRIMARY KEY
test_id      BIGINT NOT NULL REFERENCES tests(id)
domain_id    BIGINT NOT NULL REFERENCES domains(id)
raw_score    DECIMAL(5,2)
scaled_score DECIMAL(5,2)
scaled_score_based DECIMAL(5,2)
created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP


UNIQUE('observer_id', 'test_date', child_id')